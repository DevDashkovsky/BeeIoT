# Калькулятор развития пчелиной матки

Этот модуль рассчитывает календарь вывода пчелиных маток на основе даты старта (прививки).

## API Endpoint

Предполагаемый метод обработки запроса: `QueenCalculator`.

### Запрос

**Content-Type:** `application/json`

| Поле | Тип | Описание | Формат |
|---|---|---|---|
| `start_date` | string | Дата начала цикла (закладка яиц/прививка) | `YYYY-MM-DD` |

#### Пример тела запроса

```json
{
  "start_date": "2023-06-01"
}
```

### Ответ

Возвращает объект с рассчитанными датами для каждой фазы развития.

#### Структура ответа

```json
{
  "status": "ok",
  "message": "Календарь развития матки успешно рассчитан",
  "data": {
    "start_date": "2023-06-01",
    "egg_phase": {
      "standing": "2023-06-01", // День 0: Яйцо стоит
      "tilted": "2023-06-02",   // День 1: Яйцо наклонилось
      "lying": "2023-06-03"     // День 2: Яйцо легло на дно ячейки
    },
    "larva_phase": {
      "start": "2023-06-04",    // День 3: Вылупление личинки
      "day_1": "2023-06-05",
      "day_2": "2023-06-06",
      "day_3": "2023-06-07",
      "day_4": "2023-06-08",
      "day_5": "2023-06-09",
      "sealed": "2023-06-09"    // День 8: Запечатывание маточника
    },
    "pupa_phase": {
      "start": "2023-06-09",    // Начало стадии куколки (в запечатанном маточнике)
      "end": "2023-06-13",      // Окончание стадии
      "duration": "4 дня",
      "selection": "2023-06-14" // День 13: Отбор (перенос в клеточки/нуклеусы)
    },
    "queen_phase": {
      "emergence_start": "2023-06-15",      // День 14: Начало выхода матки
      "emergence_end": "2023-06-16",        // День 15: Конец выхода матки
      "maturation_start": "2023-06-17",     // День 16: Начало созревания
      "maturation_end": "2023-06-21",       // День 20: Конец созревания
      "mating_flight_start": "2023-06-22",  // День 21: Начало брачных облетов
      "mating_flight_end": "2023-06-24",    // День 23: Конец брачных облетов
      "insemination_start": "2023-06-25",   // День 24: Начало осеменения
      "insemination_end": "2023-06-27",     // День 26: Конец осеменения
      "egg_laying_check_start": "2023-06-28", // День 27: Начало проверки на засев
      "egg_laying_check_end": "2023-06-30"    // День 29: Конец проверки на засев
    }
  }
}
```
### Ошибки

В случае передачи некорректных данных сервер возвращает HTTP код 400.

| Статус | Причина | Тело ответа (text/plain) |
|---|---|---|
| 400 | Ошибка декодирования JSON | `Неверный формат JSON` |
| 400 | Неверный формат даты (не YYYY-MM-DD) | `Неверный формат даты.` |

## Логика расчета (дни от старта)

1.  **Яйцо (Egg)**: 0-2 дни.
2.  **Личинка (Larva)**: 3-8 дни (запечатывание на 8-й день).
3.  **Куколка (Pupa)**: 8-12 дни.
4.  **Отбор (Selection)**: 13-й день (перед выходом).
5.  **Выход матки (Emergence)**: 14-15 дни.
6.  **Созревание и облеты**: 16-23 дни.
7.  **Контроль засева**: 27-29 дни.
