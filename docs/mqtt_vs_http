| Критерий                             | MQTT                                                          | HTTP                                                        | Почему важно при плохом интернете                                                                |
| ------------------------------------ | ------------------------------------------------------------- | ----------------------------------------------------------- | ------------------------------------------------------------------------------------------------ |
| Модель обмена                        | Pub/Sub (издатель–брокер–подписчик)                           | Запрос–ответ (клиент–сервер)                                | Датчик просто «публикует» данные, не заботясь о получателях; меньше лишних соединений и запросов |
| Постоянное соединение                | Долгое TCP-соединение                                         | Частые короткие соединения                                  | Не нужно каждую отправку устанавливать новое соединение — меньше накладных расходов и ошибок     |
| Объём заголовков                     | Очень маленький (байты–десятки байт)                          | Большой (HTTP-заголовки, часто сотни байт и больше)         | При слабом канале меньше трафика ⇒ данные проходят надёжнее и дешевле                            |
| Режим работы                         | Лёгкий, оптимизирован для IoT                                 | Универсальный, тяжёлый протокол                             | MQTT меньше грузит сеть и устройство, что важно на нестабильном/мобильном интернете              |
| QoS (качество доставки)              | QoS 0/1/2: «как есть», «минимум один раз», «ровно один раз»   | Нет встроенного QoS для уровня сообщений                    | Можно подобрать надёжность под канал: гарантировать доставку даже при обрывах связи              |
| Хранение сообщений на брокере        | Поддерживает retained messages и очереди для офлайн-клиентов  | Нет встроенного механизма (нужно доп. сервер/БД)            | Датчик может уйти в офлайн; сообщения всё равно дождутся подписчика, когда сеть появится         |
| Работа при временном офлайне клиента | Брокер копит сообщения для подписчика (при нужных настройках) | Клиент просто не получит ответ, запрос «пропал»             | При пропадании связи данные не теряются, а доставляются позже                                    |
| Keep-alive / пинги                   | Лёгкий механизм keep-alive с малыми пакетами                  | TCP keep-alive + периодические запросы/пинги на уровне HTTP | Быстрее обнаруживаются разрывы, меньше мусорного трафика                                         |
| Поддержка маломощных устройств       | Проектирован для микроконтроллеров и ограниченных ресурсов    | Избыточен по трафику и памяти для мелких датчиков           | Датчики на батарейках и слабом железе работают стабильнее и дольше                               |
| Шифрование / безопасность            | Обычно MQTT over TLS (MQTTS) + авторизация на брокере         | HTTPS (TLS) + авторизация на сервере                        | По защите схожи, но MQTT даёт это с меньшим трафиком и накладными расходами                      |
| Транспорт                            | Обычно TCP; есть варианты MQTT-SN для UDP                     | HTTP поверх TCP                                             | MQTT-SN может работать поверх ненадёжных/медленных сетей (радио, LoRa, др.)                      |
| Поток данных                         | Эффективен для частых небольших сообщений от многих датчиков  | Эффективен для «редких, но тяжелых» запросов/ответов        | Для телеметрии (частые маленькие пакеты) MQTT заметно надёжнее и дешевле по трафику              |
| Масштабирование                      | Централизованный брокер, легко добавлять новых подписчиков    | Каждый клиент стучится к серверу отдельно                   | Проще обслуживать много датчиков и клиентов даже при слабых каналах                              |
| Управление устройствами              | Двунаправленно: команды датчикам через топики                 | Команды обычно через отдельные HTTP-запросы от датчика      | Легче удалённо управлять датчиками даже при нестабильной связи                                   |
